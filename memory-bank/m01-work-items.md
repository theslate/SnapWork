# M1 PoC Work Items

Milestone **M1** tracks proof-of-concept deliverables. Update Status (`Pending`, `InProgress`, `Completed`) as work progresses. Optional items do not block milestone completion.

| ID | Title | Status | Description | Deliverables | Acceptance | Notes |
|----|-------|--------|-------------|--------------|------------|-------|
| M01-WI-01 | Schema & Models | Completed | Define workspace/window specification, sample file, and serialization pathways. | `Workspace` and `WindowSpec` models, sample `workspace.yaml`, CLI `validate` and `print`. | Round-trip preserves data; invalid empty windows exit with code 1. | Implemented YAML serializer, validation, commands, tests. Legacy commit used WI-01 identifier prior to migration. |
| M01-WI-02 | Export Minimal | Completed | Enumerate visible top-level windows and capture metadata for export. | CLI `export` command, window enumeration with filtering. | Export produces non-empty YAML with ≥1 window entry. | Implemented Win32-backed enumerator, exporter, and CLI `export` command; validation enforces non-empty output. |
| M01-WI-12 | Virtual Desktop Scoped Save & Restore | Completed | Enable export and import of window layout scoped to one existing virtual desktop. User specifies an existing desktop identifier (index or GUID). Export filters windows to that desktop and persists a stable `desktopId`; import repositions only those windows on the same desktop. Gracefully fail when the desktop is missing or APIs are unsupported. | Desktop enumeration & selection, window snapshot augmentation with `desktopId`, CLI `export --desktop <id>` (import deferred to M01-WI-03), validation & error handling, README usage section, unit tests covering filtering and import application. | Export with `--desktop` yields YAML limited to that desktop and includes a consistent `desktopId`; desktop selector errors produce exit 3, virtual desktop unsupported produces exit 4, and zero filtered windows returns exit 1 via existing validation. | Export portion completed: COM desktop provider with fallback, selector resolver (index/GUID), CLI option with exit codes, tests, README updates. Import scope deferred to M01-WI-03 per milestone plan. |
| M01-WI-03 | Import Minimal | Pending | Reapply saved layout onto current desktop without launching new processes. | CLI `import` command (current desktop), window matching + positioning. | At least one window repositioned; missing windows logged; exit 0 when any window succeeds. | Match saved layouts to live windows using process names. |
| M01-WI-04 | Process Launch | Pending | Launch absent processes and wait for associated windows before positioning. | Process launch logic, `startupDelay` support, retry policy. | Newly launched window positioned; timeout triggers exit code 2. | Allow any process launches and expose configurable timeout settings. |
| M01-WI-05 | Virtual Desktop | Pending | Create new virtual desktop and perform import there, with fallback if unsupported. | `--new-desktop` flag default-on, fallback warnings. | Windows appear on new desktop; fallback keeps current desktop when APIs fail. | Fail with an error when the OS lacks virtual desktop support. |
| M01-WI-06 | Robustness & Matching | Pending | Improve DPI handling, window matching, logging, and finalize exit codes. | DPI normalization, case-insensitive matcher, Serilog logging, error code matrix. | Correct placement across multi-monitor setups; verbose logs available. | Support mixed-DPI environments and provide error, warning, info, and debug logging levels. |
| M01-WI-07 | Validation & Dry Run | Pending | Strengthen validation and provide dry-run planning. | Validation layer (bounds > 0, process paths), `--dry-run` option. | Dry-run prints actionable plan; no window movement occurs. | Additional validation scope left to engineering judgment for PoC. |
| M01-WI-08 | Tests & Documentation | Pending | Add automated tests, smoke script, README updates, and memory bank maintenance. | Unit tests, smoke script, README sections, memory bank updates. | Tests succeed; README reproducible; memory bank reflects completion. | Documentation remains mandatory; automated tests are optional within M1. |
| M01-WI-09 | FluentValidation Integration | Pending | Integrate FluentValidation to structure validation messages. | FluentValidation rules and wiring. | Validation errors surfaced via FluentValidation summaries. | Optional — deferred to milestone M02. Moved to M2 as M02-WI-01; retained for historical trace. |
| M01-WI-10 | Serilog Enrichers | Pending | Add Serilog enrichers for process/desktop context. | Enricher configuration, structured log fields. | Logs include process ID and desktop identifiers. | Optional — deferred to milestone M02. Moved to M2 as M02-WI-02; retained for historical trace. |
| M01-WI-11 | Metrics & Tracing | Pending | Introduce basic metrics or tracing hooks for timing insights. | Instrumentation scaffolding. | Metrics/traces available for key operations. | Optional — deferred to milestone M02. Moved to M2 as M02-WI-03; retained for historical trace. |
